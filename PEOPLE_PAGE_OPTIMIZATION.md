# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã People - Top Rankings

## üöÄ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### **1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–ø-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

#### **–ë—ã–ª–æ:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- 4 –∑–∞–ø—Ä–æ—Å–∞ –∫ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - `checkUserHasPosts()`
  - `getUserVibesCount()`
  - `getUserFriendsCountForRanking()`
  - `getUserPostsCount()`
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: ~5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è 30 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### **–°—Ç–∞–ª–æ:**
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
- **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: **~1-2 —Å–µ–∫—É–Ω–¥—ã**

### **2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**

#### **Batch –∑–∞–ø—Ä–æ—Å—ã:**
```javascript
// –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
const [postsData, vibesData, friendsData] = await Promise.all([
    database.listDocuments(/* –≤—Å–µ –ø–æ—Å—Ç—ã */),
    database.listDocuments(/* –≤—Å–µ –≤–∞–π–±—ã */),
    database.listDocuments(/* –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π */)
]);
```

#### **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
// –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è O(1) –ø–æ–∏—Å–∫–∞
const postsIndex = new Map<string, number>();
const vibesIndex = new Map<string, number>();
const friendsIndex = new Map<string, number>();
```

#### **–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
const cacheKey = `top_users_${activeTab}`;
const cached = getCache(cacheKey);
if (cached && cached.length > 0) {
    setTopRankedUsers(cached);
    return; // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
}
```

### **3. UX —É–ª—É—á—à–µ–Ω–∏—è**

#### **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞:**
- –¢–æ–ø-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ù–µ –∂–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

#### **–£–º–Ω—ã–µ —Å–∫–µ–ª–µ—Ç–æ–Ω—ã:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
- –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è

#### **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–æ–ø-20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë—ã—Å—Ç—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä—Ç–∏—Å—Ç–æ–≤/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏**: 5x –±—ã—Å—Ç—Ä–µ–µ (—Å 5-10—Å –¥–æ 1-2—Å)
- üîÑ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤**: –°–æ–∫—Ä–∞—â–µ–Ω–æ —Å 120+ –¥–æ 3 –∑–∞–ø—Ä–æ—Å–æ–≤
- üíæ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∞–±–∞–º–∏
- üì± **–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å**: –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:**
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã** –º–µ–∂–¥—É —Ç–∞–±–∞–º–∏ Users/Artists
- ‚úÖ **–£–º–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏** –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è** –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** —Ä–µ—Å—É—Ä—Å–æ–≤ –ë–î

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### **loadTopUsers() - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞:**
1. **–ö—ç—à-first –ø–æ–¥—Ö–æ–¥** - –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å
2. **Batch –∑–∞–≥—Ä—É–∑–∫–∞** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
3. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ userId
4. **–ü—Ä–µ–¥—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
5. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI

### **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
```javascript
await Promise.all([
    loadUsers(),
    loadFriends(), 
    loadSentRequests(),
    loadTopUsers() // –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
]);
```

### **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∞–±–æ–≤:**
```javascript
useEffect(() => {
    loadTopUsers(); // –°—Ä–∞–∑—É –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∞–±–∞
}, [activeTab]);
```

## üîß –î–∞–ª—å–Ω–µ–π—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Server-side –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ç–æ–ø-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞** –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
4. **Prefetch** –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –ø—Ä–∏ hover
5. **Service Worker** –¥–ª—è –æ—Ñ–ª–∞–π–Ω –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚ú® –ò—Ç–æ–≥

–°—Ç—Ä–∞–Ω–∏—Ü–∞ People —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ø-—Ä–µ–π—Ç–∏–Ω–≥–∏ **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –±–ª–∞–≥–æ–¥–∞—Ä—è:
- –£–º–Ω–æ–º—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é
- Batch –∑–∞–ø—Ä–æ—Å–∞–º –∫ –ë–î
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ø-—Ä–µ–π—Ç–∏–Ω–≥–∏ —Å—Ä–∞–∑—É, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è! üéâ
